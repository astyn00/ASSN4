# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - ASSIGNMENT 4

–î–ª—è —Ç–µ—Ö –∫—Ç–æ **"–ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ"** üòÑ

---

## üöÄ –ó–ê 10 –ú–ò–ù–£–¢ –î–û –†–ê–ë–û–¢–´

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É

```bash
cd "–ø—É—Ç—å/–∫/—Ç–≤–æ–µ–º—É/–ø—Ä–æ–µ–∫—Ç—É/ASSIGNMENT 1"
mkdir assignment4
cd assignment4
```

### –®–∞–≥ 2: –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª—ã

–°–∫–æ–ø–∏—Ä—É–π –≤ –ø–∞–ø–∫—É `assignment4/`:

1. `docker-compose.yml`
2. `prometheus.yml`
3. `custom_exporter.py`
4. `Dockerfile.custom_exporter`

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏ API –∫–ª—é—á

1. –ò–¥–∏ –Ω–∞ https://openweathermap.org/appid
2. Sign Up (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. API Keys ‚Üí —Å–∫–æ–ø–∏—Ä—É–π –∫–ª—é—á
4. –í—Å—Ç–∞–≤—å –≤ `docker-compose.yml` —Å—Ç—Ä–æ–∫–∞ 95:
   ```yaml
   - OPENWEATHER_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_–∑–¥–µ—Å—å
   ```

### –®–∞–≥ 4: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π Custom Exporter

–í `docker-compose.yml` –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫–∏ 77-91 –∏ **—É–¥–∞–ª–∏ `#`** –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:

```yaml
# –ë—ã–ª–æ:
  # custom_exporter:
  #   build:

# –°—Ç–∞–ª–æ:
  custom_exporter:
    build:
```

### –®–∞–≥ 5: –ó–ê–ü–£–°–ö!

```bash
docker-compose up -d
```

–ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –≤—Å—ë –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å

```bash
docker-compose ps
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: **Up**

---

## üé® –°–û–ó–î–ê–ô –î–ê–®–ë–û–†–î–´ (30 –ú–ò–ù–£–¢)

### 1. –û—Ç–∫—Ä–æ–π Grafana

```
http://localhost:3000
Login: admin
Password: admin
```

### 2. –î–æ–±–∞–≤—å Prometheus

- Configuration ‚Üí Data Sources ‚Üí Add ‚Üí Prometheus
- URL: `http://prometheus:9090`
- Save & Test

### 3. –°–æ–∑–¥–∞–π Dashboard 1

- Create ‚Üí Dashboard ‚Üí Add new panel
- Query: `pg_stat_activity_count{datname="nba_analytics"}`
- Title: Active Connections
- Visualization: Gauge
- Apply

–ü–æ–≤—Ç–æ—Ä—è–π –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π (—Å–º–æ—Ç—Ä–∏ `GRAFANA_GUIDE.md`)

### 4. –°–æ–∑–¥–∞–π Dashboard 2 –∏ 3

–¢–∞–∫ –∂–µ –∫–∞–∫ Dashboard 1, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ `promql_queries.md`

---

## üì§ –≠–ö–°–ü–û–†–¢ (5 –ú–ò–ù–£–¢)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞:

1. Settings (‚öôÔ∏è) ‚Üí JSON Model
2. Copy to Clipboard
3. –°–æ—Ö—Ä–∞–Ω–∏ –≤ —Ñ–∞–π–ª:
   - `dashboard1_database.json`
   - `dashboard2_system.json`
   - `dashboard3_weather.json`

–ü–æ–ª–æ–∂–∏ –≤ –ø–∞–ø–∫—É `assignment4/grafana_dashboards/`

---

## üì¶ –ó–ê–ì–†–£–ó–ò –ù–ê GITHUB (5 –ú–ò–ù–£–¢)

```bash
cd assignment4

# –î–æ–±–∞–≤—å –≤—Å–µ —Ñ–∞–π–ª—ã
git add .

# –ö–æ–º–º–∏—Ç
git commit -m "Add Assignment 4: Prometheus & Grafana Monitoring"

# –ü—É—à
git push
```

---

## üé¨ –ù–ê –ó–ê–©–ò–¢–ï (10 –ú–ò–ù–£–¢)

### –ü–æ–∫–∞–∂–∏:

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç**
   ```bash
   docker-compose ps
   ```

2. **Prometheus Targets UP**
   ```
   http://localhost:9090/targets
   ```

3. **Dashboard 1** (Database)
   - –ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ü–æ–∫–∞–∂–∏ —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã
   - –û–±—ä—è—Å–Ω–∏ 1-2 –∑–∞–ø—Ä–æ—Å–∞

4. **Dashboard 2** (System)
   - –ü–æ–∫–∞–∂–∏ CPU usage
   - –ü–æ–∫–∞–∂–∏ RAM usage
   - –û–±—ä—è—Å–Ω–∏ 1-2 –∑–∞–ø—Ä–æ—Å–∞

5. **Dashboard 3** (Weather)
   - –ü–æ–∫–∞–∂–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
   - –ü–æ–∫–∞–∂–∏ –≥—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –û–±—ä—è—Å–Ω–∏ —á—Ç–æ –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

6. **GitHub**
   - –û—Ç–∫—Ä–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ü–æ–∫–∞–∂–∏ –ø–∞–ø–∫—É assignment4/
   - –ü–æ–∫–∞–∂–∏ JSON —Ñ–∞–π–ª—ã

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ "–Ø –ì–û–¢–û–í!"

- [ ] Docker —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API –∫–ª—é—á –ø–æ–ª—É—á–µ–Ω –∏ –≤—Å—Ç–∞–≤–ª–µ–Ω
- [ ] `docker-compose up -d` –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ **Up**
- [ ] Prometheus –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ :9090
- [ ] Grafana –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ :3000
- [ ] –í—Å–µ Targets –∑–µ–ª—ë–Ω—ã–µ (UP)
- [ ] 3 –¥–∞—à–±–æ—Ä–¥–∞ —Å–æ–∑–¥–∞–Ω—ã –≤ Grafana
- [ ] –ö–∞–∂–¥—ã–π –¥–∞—à–±–æ—Ä–¥ –∏–º–µ–µ—Ç 10+ –ø–∞–Ω–µ–ª–µ–π
- [ ] Dashboard variable –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Alert —Å–æ–∑–¥–∞–Ω
- [ ] JSON —Ñ–∞–π–ª—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –í—Å—ë –∑–∞–≥—Ä—É–∂–µ–Ω–æ –Ω–∞ GitHub

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç:

```bash
docker-compose logs –∏–º—è_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```

–°–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫—É –∏ –≥—É–≥–ª–∏.

### Target DOWN:

- **postgres_exporter**: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
- **weather_exporter**: –ü—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Grafana:

1. –ü—Ä–æ–≤–µ—Ä—å Data Source (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚úÖ)
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Prometheus –≤–∏–¥–∏—Ç –º–µ—Ç—Ä–∏–∫–∏: http://localhost:9090
3. –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å

### API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –∫–ª—é—á (–ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–∏—Å—å–º–æ)
2. –ü–æ–¥–æ–∂–¥–∏ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

---

## üí° –õ–ê–ô–§–•–ê–ö–ò

### –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∂–¥–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ 1-5 —á–∞—Å–æ–≤?

```bash
# –ó–∞–ø—É—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–∫—É:
python ../auto_insert.py  # –∏–∑ Assignment 3

# –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞—á–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ –º–µ–Ω—è—Ç—å—Å—è
```

### –ö—Ä–∞—Å–∏–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –±—ã—Å—Ç—Ä–æ:

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω
2. Grafana ‚Üí Dashboards ‚Üí Import
3. –í—Å—Ç–∞–≤—å ID: 9628 (PostgreSQL), 1860 (Node Exporter)
4. –ê–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏

### –ó–∞–±—ã–ª —á—Ç–æ-—Ç–æ?

–û—Ç–∫—Ä–æ–π `README_ASSIGNMENT4.md` - —Ç–∞–º –≤—Å—ë –ø–æ–¥—Ä–æ–±–Ω–æ!

---

**–í–°–Å! –¢–ï–ü–ï–†–¨ –ò–î–ò –ò –ó–ê–©–ò–©–ê–ô–°–Ø!** üî•üöÄ

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

–ï—Å–ª–∏ —Å–æ–≤—Å–µ–º –∑–∞—Å—Ç—Ä—è–ª:
1. –ü–µ—Ä–µ—á–∏—Ç–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
2. –ü–æ–≥—É–≥–ª–∏ –æ—à–∏–±–∫—É
3. –°–ø—Ä–æ—Å–∏ –≤ Teams
4. –ü–æ—Å–º–æ—Ç—Ä–∏ –≤–∏–¥–µ–æ –Ω–∞ YouTube: "Prometheus Grafana tutorial"

**–£–î–ê–ß–ò!** üí™