# üî• ASSIGNMENT 4 - PROMETHEUS & GRAFANA MONITORING

## üìã –û –ó–ê–î–ê–ù–ò–ò

**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å Prometheus –∏ Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–î–µ–¥–ª–∞–π–Ω:** Week 9 (–º–æ–∂–Ω–æ —Å–¥–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 2 –Ω–µ–¥–µ–ª—å –ø–æ—Å–ª–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è)

**–ë–∞–ª–ª—ã:** 100 (30+25+45)

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨

–°–æ–∑–¥–∞—Ç—å **3 –¥–∞—à–±–æ—Ä–¥–∞ –≤ Grafana**:

1. **Database Monitoring** (30 –±–∞–ª–ª–æ–≤) - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PostgreSQL
2. **System Monitoring** (25 –±–∞–ª–ª–æ–≤) - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞ (CPU, RAM, –¥–∏—Å–∫)
3. **Weather API Monitoring** (45 –±–∞–ª–ª–æ–≤) - –°–≤–æ–π Python exporter –¥–ª—è –ø–æ–≥–æ–¥—ã

**–ö–∞–∂–¥—ã–π –¥–∞—à–±–æ—Ä–¥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:**
- ‚úÖ 10+ PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ 60%+ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (rate, avg, sum, etc.)
- ‚úÖ 10+ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π (–º–∏–Ω–∏–º—É–º 4 —Ç–∏–ø–∞)
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä (dashboard variable)
- ‚úÖ –•–æ—Ç—è –±—ã 1 alert –ø—Ä–∞–≤–∏–ª–æ
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON

---

## üóÇÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
ASSIGNMENT 1/
‚îú‚îÄ‚îÄ üìÅ assignment4/                    # –ù–æ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ docker-compose.yml          # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ prometheus.yml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ custom_exporter.py          # Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Dockerfile.custom_exporter  # Docker –æ–±—Ä–∞–∑ –¥–ª—è exporter
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ promql_queries.md           # –í—Å–µ PromQL –∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ GRAFANA_GUIDE.md            # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Grafana
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ README_ASSIGNMENT4.md       # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ grafana_dashboards/         # –≠–∫—Å–ø–æ—Ä—Ç—ã –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard1_database.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard2_system.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard3_weather.json
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ screenshots/                # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è –∑–∞—â–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ prometheus_targets.png
‚îÇ       ‚îú‚îÄ‚îÄ dashboard1.png
‚îÇ       ‚îú‚îÄ‚îÄ dashboard2.png
‚îÇ       ‚îî‚îÄ‚îÄ dashboard3.png
‚îú‚îÄ‚îÄ ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞)
```

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É –¥–ª—è Assignment 4

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
mkdir assignment4
cd assignment4
```

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π –≤—Å–µ —Ñ–∞–π–ª—ã

–°–æ—Ö—Ä–∞–Ω–∏ –≤ –ø–∞–ø–∫—É `assignment4/`:
- `docker-compose.yml`
- `prometheus.yml`
- `custom_exporter.py`
- `Dockerfile.custom_exporter`
- `promql_queries.md`
- `GRAFANA_GUIDE.md`
- `README_ASSIGNMENT4.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏ API –∫–ª—é—á –¥–ª—è –ø–æ–≥–æ–¥—ã

1. –ó–∞–π–¥–∏ –Ω–∞ https://openweathermap.org/api
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –°–∫–æ–ø–∏—Ä—É–π API Key
4. –û—Ç–∫—Ä–æ–π `docker-compose.yml` –∏ –≤—Å—Ç–∞–≤—å –∫–ª—é—á:
   ```yaml
   environment:
     - OPENWEATHER_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_–∑–¥–µ—Å—å
   ```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
# –í –ø–∞–ø–∫–µ assignment4/
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# Prometheus
curl http://localhost:9090/-/healthy
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: Prometheus is Healthy.

# Grafana
curl http://localhost:3000/api/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"database":"ok"}

# DB Exporter
curl http://localhost:9187/metrics
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ PostgreSQL

# Node Exporter
curl http://localhost:9100/metrics
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã

# Weather Exporter (–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ–∑–∂–µ)
curl http://localhost:8000/metrics
```

### –®–∞–≥ 6: –û—Ç–∫—Ä–æ–π Prometheus

```
URL: http://localhost:9090
```

**–ü—Ä–æ–≤–µ—Ä—å Targets:**
1. Status ‚Üí Targets
2. –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **UP** (–∑–µ–ª—ë–Ω—ã–µ)

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ **DOWN**:
- DB Exporter: –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
- Node Exporter: –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ–≥–¥–∞
- Weather Exporter: –ø—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á

### –®–∞–≥ 7: –û—Ç–∫—Ä–æ–π Grafana

```
URL: http://localhost:3000
Login: admin
Password: admin
```

**–î–æ–±–∞–≤—å Data Source:**
1. Configuration ‚Üí Data Sources ‚Üí Add data source
2. –í—ã–±–µ—Ä–∏ Prometheus
3. URL: `http://prometheus:9090`
4. Save & Test ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ

### –®–∞–≥ 8: –°–æ–∑–¥–∞–π –¥–∞—à–±–æ—Ä–¥—ã

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ `GRAFANA_GUIDE.md`:
- Dashboard 1: Database Monitoring
- Dashboard 2: System Monitoring
- Dashboard 3: Weather Monitoring

---

## üìä –°–ë–û–† –ú–ï–¢–†–ò–ö (1-5 –ß–ê–°–û–í)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ –∂–¥–∏

–ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ø–æ–¥–æ–∂–¥–∏ 1-5 —á–∞—Å–æ–≤. –ú–µ—Ç—Ä–∏–∫–∏ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```bash
# –ó–∞–ø—É—Å—Ç–∏
docker-compose up -d

# –û—Å—Ç–∞–≤—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
# –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5-20 —Å–µ–∫—É–Ω–¥
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∏–º—É–ª—è—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

**–î–ª—è Database Exporter:**

```bash
# –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç auto_insert.py –∏–∑ Assignment 3
cd ../  # –≤–µ—Ä–Ω–∏—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
python auto_insert.py

# –û–Ω –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ ‚Üí –º–µ—Ç—Ä–∏–∫–∏ –∏–∑–º–µ–Ω—è—Ç—Å—è
```

**–î–ª—è Node Exporter:**

```bash
# –°–æ–∑–¥–∞–π –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU
stress --cpu 4 --timeout 300s  # 5 –º–∏–Ω—É—Ç –Ω–∞–≥—Ä—É–∑–∫–∏

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π –º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º
```

**–î–ª—è Weather Exporter:**

–ü–æ–≥–æ–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è —Å–∞–º–∞, –ø—Ä–æ—Å—Ç–æ –∂–¥–∏ :)

---

## üé¨ –°–¶–ï–ù–ê–†–ò–ô –ó–ê–©–ò–¢–´

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–∑–∞ –¥–µ–Ω—å –¥–æ –∑–∞—â–∏—Ç—ã):

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
2. ‚úÖ –°–æ–±–µ—Ä–∏ –º–µ—Ç—Ä–∏–∫–∏ –º–∏–Ω–∏–º—É–º 1 —á–∞—Å
3. ‚úÖ –°–æ–∑–¥–∞–π –≤—Å–µ 3 –¥–∞—à–±–æ—Ä–¥–∞
4. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π JSON —Ñ–∞–π–ª—ã
5. ‚úÖ –ó–∞–≥—Ä—É–∑–∏ –≤ GitHub
6. ‚úÖ –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### –í –¥–µ–Ω—å –∑–∞—â–∏—Ç—ã:

**–®–ê–ì 1 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**

```bash
docker-compose ps

# –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UP
```

**–®–ê–ì 2 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ Prometheus Targets**

```
http://localhost:9090/targets

# –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–µ (UP)
```

**–®–ê–ì 3 (2 –º–∏–Ω—É—Ç—ã): –ü–æ–∫–∞–∂–∏ Dashboard 1 - Database**

```
–û—Ç–∫—Ä—ã–≤–∞–µ—à—å –¥–∞—à–±–æ—Ä–¥ "PostgreSQL Database Monitoring"
–ü–æ–∫–∞–∑—ã–≤–∞–µ—à—å:
- Active Connections (–¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)
- Database Size (–≤ GB)
- Read/Write Operations (–≥—Ä–∞—Ñ–∏–∫–∏ –º–µ–Ω—è—é—Ç—Å—è)
- Cache Hit Ratio (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >90%)
```

**–ì–æ–≤–æ—Ä–∏—à—å:**
"–ó–¥–µ—Å—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö NBA Analytics. –í–∏–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã, —Å–∫–æ—Ä–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏."

**–®–ê–ì 4 (2 –º–∏–Ω—É—Ç—ã): –ü–æ–∫–∞–∂–∏ Dashboard 2 - System**

```
–û—Ç–∫—Ä—ã–≤–∞–µ—à—å –¥–∞—à–±–æ—Ä–¥ "System Resource Monitoring"
–ü–æ–∫–∞–∑—ã–≤–∞–µ—à—å:
- CPU Usage –ø–æ —è–¥—Ä–∞–º
- RAM Usage (–¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- Disk I/O (–≥—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–∏—Å–∫–∞)
- Network Traffic
```

**–ì–æ–≤–æ—Ä–∏—à—å:**
"–ó–¥–µ—Å—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ - –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å. –í—Å—ë –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏."

**–®–ê–ì 5 (3 –º–∏–Ω—É—Ç—ã): –ü–æ–∫–∞–∂–∏ Dashboard 3 - Weather**

```
–û—Ç–∫—Ä—ã–≤–∞–µ—à—å –¥–∞—à–±–æ—Ä–¥ "Weather Monitoring"
–ü–æ–∫–∞–∑—ã–≤–∞–µ—à—å:
- Current Temperature (—Ç–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –ê—Å—Ç–∞–Ω–µ)
- Humidity, Pressure, Wind Speed
- Temperature Trend (–≥—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã)
```

**–ì–æ–≤–æ—Ä–∏—à—å:**
"–≠—Ç–æ –∫–∞—Å—Ç–æ–º–Ω—ã–π exporter –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –∏–∑ OpenWeather API –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥."

**–®–ê–ì 6 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ PromQL –∑–∞–ø—Ä–æ—Å—ã**

```
–û—Ç–∫—Ä–æ–π –ª—é–±–æ–π –≥—Ä–∞—Ñ–∏–∫ ‚Üí Edit
–ü–æ–∫–∞–∂–∏ PromQL –∑–∞–ø—Ä–æ—Å
–ù–∞–ø—Ä–∏–º–µ—Ä:
  rate(pg_stat_database_blks_read{datname="nba_analytics"}[5m])

–û–±—ä—è—Å–Ω–∏:
  "–≠—Ç–æ rate —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –±–ª–æ–∫–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç"
```

**–®–ê–ì 7 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ Dashboard Variable**

```
–í–≤–µ—Ä—Ö—É –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ–∫–∞–∂–∏ —Ñ–∏–ª—å—Ç—Ä (dropdown)
–í—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–∫–∞–∂–∏ —á—Ç–æ –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
```

**–®–ê–ì 8 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ Alert**

```
–û—Ç–∫—Ä–æ–π –ø–∞–Ω–µ–ª—å —Å alert'–æ–º
–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫ (üîî)
–ü–æ–∫–∞–∂–∏ —É—Å–ª–æ–≤–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
–ù–∞–ø—Ä–∏–º–µ—Ä: "–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ—Å–ª–∏ connections > 100"
```

**–®–ê–ì 9 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ GitHub**

```
–û—Ç–∫—Ä–æ–π GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
–ü–æ–∫–∞–∂–∏ –ø–∞–ø–∫—É assignment4/
–ü–æ–∫–∞–∂–∏ —á—Ç–æ —Ç–∞–º –≤—Å–µ —Ñ–∞–π–ª—ã:
- docker-compose.yml
- prometheus.yml
- custom_exporter.py
- grafana_dashboards/
```

**–®–ê–ì 10 (1 –º–∏–Ω—É—Ç–∞): –ü–æ–∫–∞–∂–∏ —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è**

```
–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–∞—à–±–æ—Ä–¥–∞
–ü–æ–∫–∞–∂–∏ —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
–ì–æ–≤–æ—Ä–∏—à—å: "–í–∏–¥–∏—Ç–µ, –º–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"
```

**–ò–¢–û–ì–û: ~12 –º–∏–Ω—É—Ç –∑–∞—â–∏—Ç—ã**

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–©–ò–¢–û–ô

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- [ ] Prometheus –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 9090
- [ ] Grafana –∑–∞–ø—É—â–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç—É 3000
- [ ] –í—Å–µ 3 exporters —Ä–∞–±–æ—Ç–∞—é—Ç (UP –≤ Targets)
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –º–∏–Ω–∏–º—É–º 1-5 —á–∞—Å–æ–≤
- [ ] –í—Å–µ 3 –¥–∞—à–±–æ—Ä–¥–∞ —Å–æ–∑–¥–∞–Ω—ã –≤ Grafana

### Dashboard 1 (Database):

- [ ] ‚â•10 PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] ‚â•60% —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (rate, sum, avg, time, etc.)
- [ ] ‚â•10 –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
- [ ] –ú–∏–Ω–∏–º—É–º 4 —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞ (time series, gauge, stat, table)
- [ ] Dashboard variable –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] 1+ alert –ø—Ä–∞–≤–∏–ª–æ
- [ ] JSON —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### Dashboard 2 (System):

- [ ] ‚â•10 PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] ‚â•60% —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- [ ] ‚â•10 –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
- [ ] –ú–∏–Ω–∏–º—É–º 4 —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞
- [ ] Dashboard variable –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] 1+ alert –ø—Ä–∞–≤–∏–ª–æ
- [ ] JSON —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### Dashboard 3 (Weather):

- [ ] ‚â•10 PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] ‚â•60% —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- [ ] ‚â•10 –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
- [ ] –ú–∏–Ω–∏–º—É–º 4 —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞
- [ ] Dashboard variable –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] 1+ alert –ø—Ä–∞–≤–∏–ª–æ
- [ ] JSON —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥
- [ ] custom_exporter.py —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

### GitHub:

- [ ] docker-compose.yml –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] prometheus.yml –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] custom_exporter.py –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] Dockerfile.custom_exporter –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] –í—Å–µ 3 JSON –¥–∞—à–±–æ—Ä–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- [ ] README_ASSIGNMENT4.md –∑–∞–≥—Ä—É–∂–µ–Ω

---

## üÜò TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏
docker-compose logs prometheus
docker-compose logs grafana
docker-compose logs postgres_exporter

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
docker-compose restart
```

### –ü—Ä–æ–±–ª–µ–º–∞: Targets DOWN –≤ Prometheus

**DB Exporter DOWN:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
psql -U postgres -d nba_analytics -c "SELECT 1"

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø—Ä–∞–≤—å –≤ docker-compose.yml:
DATA_SOURCE_NAME: "postgresql://—Ç–≤–æ–π_—é–∑–µ—Ä:—Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å@host.docker.internal:5432/nba_analytics?sslmode=disable"
```

**Weather Exporter DOWN:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á
curl "http://api.openweathermap.org/data/2.5/weather?q=Astana&appid=—Ç–≤–æ–π_–∫–ª—é—á&units=metric"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –ø–æ–≥–æ–¥–æ–π
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –≤ Grafana

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
curl http://localhost:9187/metrics | grep pg_
curl http://localhost:9100/metrics | grep node_
curl http://localhost:8000/metrics | grep weather_

# –ï—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –ø—Ä–æ–≤–µ—Ä—å Data Source –≤ Grafana
```

### –ü—Ä–æ–±–ª–µ–º–∞: PromQL –∑–∞–ø—Ä–æ—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
1. –û—Ç–∫—Ä–æ–π Prometheus: http://localhost:9090
2. Graph ‚Üí –≤—Å—Ç–∞–≤—å –∑–∞–ø—Ä–æ—Å
3. Execute
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
5. –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö - –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ exporter —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –ü—Ä–æ–±–ª–µ–º–∞: Custom Exporter –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ó–∞–ø—É—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cd assignment4
python custom_exporter.py

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úì HTTP server started on port 8000
# [Iteration 1] Fetching weather data...
# ‚úì Weather data received for Astana

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Invalid API key" - –ø—Ä–æ–≤–µ—Ä—å –∫–ª—é—á
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–ê–ô–õ–´

### promql_queries.md
–í—Å–µ PromQL –∑–∞–ø—Ä–æ—Å—ã —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏:
- 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Database Dashboard
- 12 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è System Dashboard
- 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Weather Dashboard

### GRAFANA_GUIDE.md
–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –¥–∞—à–±–æ—Ä–¥–æ–≤:
- –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–Ω–µ–ª—å
- –ö–∞–∫–∏–µ —Ç–∏–ø—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å variables
- –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å alerts

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –û–¶–ï–ù–ö–ò

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ë–∞–ª–ª—ã | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|------------|-------|----------|
| **Dashboard 1 (Database)** | 30 | |
| - Prometheus –∏ Grafana —Ä–∞–±–æ—Ç–∞—é—Ç | | ‚úÖ/‚ùå |
| - DB Exporter —Ä–∞–±–æ—Ç–∞–µ—Ç (UP) | | ‚úÖ/‚ùå |
| - ‚â•10 PromQL –∑–∞–ø—Ä–æ—Å–æ–≤ | | ‚úÖ/‚ùå |
| - ‚â•60% —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ | | ‚úÖ/‚ùå |
| - –ó–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã | | ‚úÖ/‚ùå |
| - –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±—Ä–∞–Ω—ã 1-5 —á–∞—Å–æ–≤ | | ‚úÖ/‚ùå |
| - ‚â•10 –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π, ‚â•4 —Ç–∏–ø–∞ | | ‚úÖ/‚ùå |
| - Dashboard variable —Ä–∞–±–æ—Ç–∞–µ—Ç | | ‚úÖ/‚ùå |
| - ‚â•1 alert –ø—Ä–∞–≤–∏–ª–æ | | ‚úÖ/‚ùå |
| - –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è | | ‚úÖ/‚ùå |
| - JSON –≤ GitHub | | ‚úÖ/‚ùå |
| - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç | | ‚úÖ/‚ùå |
| **Dashboard 2 (System)** | 25 | –¢–µ –∂–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ |
| **Dashboard 3 (Weather)** | 45 | –¢–µ –∂–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ + custom_exporter.py |

**–í–ê–ñ–ù–û:** –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—É–Ω–∫—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω - –¥–∞—à–±–æ—Ä–¥ –ø–æ–ª—É—á–∞–µ—Ç 0 –±–∞–ª–ª–æ–≤!

---

## üí° –°–û–í–ï–¢–´

### –î–ª—è —É—Å–ø–µ—à–Ω–æ–π –∑–∞—â–∏—Ç—ã:

1. **–ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë –∑–∞ –¥–µ–Ω—å –¥–æ –∑–∞—â–∏—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–°–æ–±–µ—Ä–∏ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ** - –º–∏–Ω–∏–º—É–º 1-2 —á–∞—Å–∞
3. **–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã** - –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è
4. **–ü–æ—Ç—Ä–µ–Ω–∏—Ä—É–π—Å—è** - –ø—Ä–æ–π–¥–∏ –≤–µ—Å—å —Å—Ü–µ–Ω–∞—Ä–∏–π –∑–∞—â–∏—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
5. **–ü—Ä–æ–≤–µ—Ä—å GitHub** - –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã

### –ï—Å–ª–∏ –Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–æ–ª–≥–æ:

```bash
# –ó–∞–ø—É—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É
python auto_insert.py  # –∏–∑ Assignment 3

# –ó–∞–ø—É—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É
stress --cpu 4 --io 2 --vm 2 --timeout 600s

# –ú–µ—Ç—Ä–∏–∫–∏ –±—ã—Å—Ç—Ä–æ –∏–∑–º–µ–Ω—è—Ç—Å—è, –±—É–¥–µ—Ç —á—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å
```

### –ö—Ä–∞—Å–∏–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã:

- –ò—Å–ø–æ–ª—å–∑—É–π –µ–¥–∏–Ω—É—é —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É
- –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ—Ö–æ–∂–∏–µ –ø–∞–Ω–µ–ª–∏
- –î–æ–±–∞–≤–ª—è–π –æ–ø–∏—Å–∞–Ω–∏—è –∫ –ø–∞–Ω–µ–ª—è–º
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (GB, %, ¬∞C)

---

## üìû –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- [Prometheus Documentation](https://prometheus.io/docs/introduction/overview/)
- [Grafana Documentation](https://grafana.com/docs/grafana/latest/)
- [PromQL Tutorial](https://prometheus.io/docs/prometheus/latest/querying/basics/)
- [OpenWeather API](https://openweathermap.org/api)
- [PostgreSQL Exporter](https://github.com/prometheus-community/postgres_exporter)
- [Node Exporter](https://github.com/prometheus/node_exporter)

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å:

- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –¥–ª—è Assignment 4
- ‚úÖ Docker Compose –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ Custom Weather Exporter
- ‚úÖ –í—Å–µ PromQL –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Grafana
- ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π –∑–∞—â–∏—Ç—ã

**–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –∏ –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è!** üöÄ

---

## ‚ùì –í–û–ü–†–û–°–´?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ:
1. –ü–µ—Ä–µ—á–∏—Ç–∞–π —ç—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
2. –ü–æ—Å–º–æ—Ç—Ä–∏ `GRAFANA_GUIDE.md`
3. –ü–æ—Å–º–æ—Ç—Ä–∏ `promql_queries.md`
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
5. –ó–∞–≥—É–≥–ª–∏ –æ—à–∏–±–∫—É

**–£–î–ê–ß–ò –ù–ê –ó–ê–©–ò–¢–ï!** üí™üî•